apiVersion: batch/v1
kind: Job
metadata:
  generateName: {{ .Values.name }}-
  namespace: {{ .Values.namesape }}
  annotations:
    argocd.argoproj.io/hook: {{ .Values.hooktype }}
spec:
  template:
    spec:
      containers:
        - name: job
          image: quay.io/openshift/origin-cli:latest
          command: ["oc"]
          args:
            - get
            - ingresses.config.openshift.io
            - cluster
            - -o 
            - jsonpath='{.spec.domain}
      restartPolicy: Never
      serviceAccountName: {{ .Values.serviceaccount }}
  backoffLimit: 4